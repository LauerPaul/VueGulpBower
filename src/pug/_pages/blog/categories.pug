.container-fluid.categories-wrapper
	.row
		.col-md-8
			v-card(:pagination.sync="pagination", select-all)

				v-toolbar(color="cyan", dark)
					v-icon mdi-archive
					v-toolbar-title Категории блога
					v-spacer
					v-btn(icon, @click="toggleSearch", title="Найти категорию")
						v-icon(v-if="!searchlineShow") mdi-magnify
						v-icon(v-else) mdi-close
					v-text-field(v-show="searchlineShow", v-model="search", label="Поиск", single-line, hide-details)
					v-btn(icon, title="Добавить категорию")
						v-icon add

				//- Таблица 
				v-data-table.elevation-1(v-model="selected", :headers="headers", :items="categories", :pagination.sync="pagination", :search="search", item-key="name", sort-icon="mdi-menu-down", prev-icon="mdi-menu-left", next-icon="mdi-menu-right", :loading="loading")
					v-progress-linear(slot="progress", color="cyan", indeterminate)
					template(slot="items", slot-scope="props")
						tr(:active="props.selected", @click="props.selected = !props.selected", :id="'CatBlog_'+props.item.id")
							td.justify-center
								strong.opacity_6 {{ props.item.id }}
							td.text-left(:class="{opacity_6 : !props.item.status}")
								router-link(tag="button", :to="{name: 'blogCategory', params: {id: props.item.id}}") {{ props.item.name }}
							td.text-center {{ props.item.posts_count }}
							td.text-left(style="width: 80px;")
								v-icon(v-if="props.item.status", color="green") check
								v-icon(v-else, color="gray") visibility_off
							td.justify-start.layout.px-0
								.control-wrapper.d-flex.align-items-center
									//- Quick view
									v-btn.mini-circle(icon, title="Быстрый просмотр", fab, dark, small, color="green", @click.stop="quickView = !quickView; selectItem = props.item")
										v-icon(color="gray") mdi-magnify
									//- Edit
									v-btn.mini-circle(fab, dark, small, color="blue", :to="{name: 'blogCategory', params: {id: props.item.id}}", title="Редактировать")
											v-icon mdi-pencil
									//- Remove
									v-btn.mini-circle(icon, @click.stop="selectItem = props.item; removeAlert()", title="Удалить", fab, small, :dark="props.item.posts_count == 0", :color="props.item.posts_count > 0 ? 'gray ighten-1' : 'red'", :disabled="props.item.posts_count > 0")
										v-icon mdi-delete

					//- Если таблица пустая
					template(slot="no-data")
						span(style="margin-left: 10px; display: inline-block;") Загружаю...

					//- Если нет результатов поиска
				v-list-tile(avatar)
					v-alert(slot="no-results", :value="true", color="error", icon="warning") Совпадений с "{{ search }}" в категориях блога не найдено.

	//- Всплывающее окно подтверждения удаления
	include ./categories/dialog-remove.pug
	//- Всплывающее окно быстрого просмотра
	//- include ./categories/quick-view.pug

	v-dialog(v-model="quickView", fullscreen, hide-overlay, transition="dialog-bottom-transition", scrollable)
		v-card(tile)
			v-toolbar(card, dark, color="cyan")
				v-btn(icon, dark, @click.native="quickView = !quickView;", title="Закрыть")
					v-icon close
				v-toolbar-title Быстрый просмотр
				v-spacer
				v-toolbar-items
					v-btn(dark, flat, @click.native="quickView = !quickView;") Сохранить
			
			v-card-text
				v-list(three-line, subheader)
					v-subheader ID категории - &nbsp;
						strong  {{ selectItem.id }}
					v-list-tile(avatar)
						v-list-tile-content
							v-list-tile-title Название категории
							v-list-tile-sub-title {{ selectItem.name }}
					v-list-tile(avatar)
						v-list-tile-content
							v-list-tile-title URL категории
							v-list-tile-sub-title {{ selectItem.url }}
				
				v-divider
				v-list(one-line, subheader)
					v-subheader Кол-во публикаций в категории - &nbsp;
						strong {{ selectItem.posts_count }}
				
				v-divider
				v-list(three-line, subheader)
					v-subheader Изображение категории
					v-list-tile(avatar)
						v-list-tile-content
							img(:src="selectItem.img", style="max-height: 100%; max-width: 100%;")
				
				v-divider
				v-list(one-line, subheader)
					v-list-tile(avatar)
						v-list-tile-action
							v-checkbox(v-model="selectItem.status")
						v-list-tile-content
							v-list-tile-title Статус
							v-list-tile-sub-title Вкл\Выкл категории на сайте

			div(style="flex: 1 1 auto;")